
<!DOCTYPE HTML>
<html lang="en"> 

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="shortcut icon" href="snowflake.ico">
    <link rel="stylesheet" type="text/css" href="default.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="colorbox-master/example2/colorbox.css" />
    <script src="colorbox-master/jquery.colorbox-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/1.4.11/jquery.scrollTo.min.js"></script>
    <script src="https://www.chartjs.org/dist/2.7.3/Chart.bundle.js"></script>
    <script src="https://www.chartjs.org/samples/latest/utils.js"></script>
    <script src="index.js"></script>
    <title>
      
    </title>
  </head>

  <body>

        <table style="background-color:#99c2e440; margin:auto; border-style:dotted;">
                <tr>
                        <th>
                                <img src="snowflake.png" style="width:80px;"></img>
                        </th>
                        <th>
                                <h1>SBS to Anaglyph</h1>
                        </th>
                </tr>
        </table>

       

        <h1>Number of correspondences</h1>
        <h2 id="numCorespText"></h2>

        <canvas id = "canvas" style="border:1px solid gray;"></canvas>
        <br/>

        <form id="settingsForm">
                <h3>Settings</h3>
                Down Sample Times<br/>
                <input id='downsampleTimes' value='0' type="number"></input><br/>
                <button type="button" onclick="runConverter()">Run</button>
        </form>

        <canvas id = "anaglyphCanvas" style="border:1px solid gray;"></canvas>
        <br/>
        <img id="anaglyphImage1" src="seagull.jpg" style="width:30%">
        <br/>
        <img id="anaglyphImage2" src="wolfieEntryway.jpg" style="width:30%">
        <br/>
        <img id="anaglyphImage3" src="scaleBG.jpg" style="width:30%">
        <br/>
        <img id="anaglyphImage1" src="skylight.jpg" style="width:30%">
        <br/>

        

        <script src="imageFilters.js"></script>
        <script src="imageFunctions.js"></script>
        <script src="featureOperations.js"></script>
        <script src="AnaglyphConversion.js"></script>
        <script src="SetOperations.js"></script>
        <script>
        var canvas = document.getElementById('canvas');
        var image = new Image();

        var ctx = canvas.getContext('2d');
        canvas.width = 800;
        canvas.height = 600;

        //get the context of the anaglyph display canvas
        var anaglyphCanvas = document.getElementById('anaglyphCanvas');
        var aCtx = anaglyphCanvas.getContext('2d');
        anaglyphCanvas.width = 800;
        anaglyphCanvas.height = 600;

        function setup()
        {
                update = setInterval(CanvasUpdate, 60);
                canvas.onmousemove = handleMouseMove;
        };
        window.onload = setup;

        function runConverter()
        {
                //event.preventDefault();

                var numTimesToDownsample = document.getElementById("downsampleTimes").value;

                image.onload = function() { ConvertImageToAnaglyph(image, ctx, aCtx, numTimesToDownsample); }
                console.log("image onload function set");

                image.src = 'rawSBSImages/20190118_094811.jpg';
                console.log("imageSrc set");
        }

        sbsImage = document.getElementById("sbsImage");

        function printMousePos(event)
        {
                xPos = event.offsetX;//clientX;// - canvas.x;
                yPos = event.offsetY;//clientY;// - canvas.y;
                document.getElementById("numCorespText").innerHTML =
                        "clientX: " + xPos +
                        " - clientY: " + yPos;
        }
        canvas.addEventListener("click", printMousePos);


        function handleMouseMove(event) 
        {
                xPos = event.offsetX;
                yPos = event.offsetY;
        }
        
        function CanvasUpdate()
        {
        }       

        /*
        var ctx = document.getElementById("myChart").getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [$labelValues],
                datasets: [{
                    label: '$label',
                    data: [$dataValues],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ]/*,
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true
                        }
                    }]
                }
            }
        });
        */
        </script>


  </body>

</html>
